{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="navbar">
    <div class="nav-left">
        <h2><a href="{% url 'home' %}">Adaptive Streaming</a></h2>
    </div>
    <div class="nav-right">
        <span class="welcome-text">Welcome, {{ user.username }}</span>
        <form method="post" action="{% url 'logout' %}" class="logout-form">
                {% csrf_token %}
                <button type="submit" class="btn logout-btn">Logout</button>
            </form>
    </div>
</div>
<div class="detailed_view_container">
    <h2>{{ video.title }}</h2>
    <p>{{ video.description }}</p>
    {% if video.is_streamable %}
    <p>Currently using: DASH</p>
    <div data-shaka-player-container data-shaka-player-cast-receiver-id="07AEE832">
        <video id="video" data-shaka-player data-mpd="{{ video.manifest_url }}"></video>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.ui.min.js"></script>
    <script src="{% static 'js/shaka-player.js' %}"></script>
    {% else %}
    <p>Currently using: original video</p>
    <video controls preload="metadata" width="100%">
        <source src="{{ video.video.url }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% endif %}
</div>
{% endblock %}