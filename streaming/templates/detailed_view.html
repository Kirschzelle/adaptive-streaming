{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="navbar">
    <div class="nav-left">
        <h2><a href="{% url 'home' %}">Adaptive Streaming</a></h2>
    </div>
    <div class="nav-right">
        <span class="welcome-text">Welcome, {{ user.username }}</span>
        <form method="post" action="{% url 'logout' %}" class="logout-form">
                {% csrf_token %}
                <button type="submit" class="btn logout-btn">Logout</button>
            </form>
    </div>
</div>
<div class="detailed_view_container">
    <h2>{{ video.title }}</h2>
    <p>{{ video.description }}</p>
    {% with variant=video.best_variant %}
        {% if variant and variant.file %}
        <p>Quality: {{ variant.resolution }}</p>
        <video controls preload="metadata" width="100%">
            <source src="{{ variant.file.url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        {% else %}
        <p>No video variant available, using original uploaded video</p>
        <video controls preload="metadata" width="100%">
            <source src="{{ video.video.url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        {% endif %}
    {% endwith %}
</div>
{% endblock %}